<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>SimpleQuery.java</title>


<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<meta name="KEYWORDS" content="JBuilderHtml"></head><body style="background-color: rgb(255, 255, 255);">
<table bgcolor="#c0c0c0" cellpadding="5" cellspacing="0" cols="1" width="100%">
<tbody>
<tr>
<td>
<center> <font color="#000000" face="Arial,Helvetica"> SimpleQuery.java</font> </center>
</td>
</tr>
</tbody>
</table>
<pre><font color="#000080"><b>import</b></font><font color="#000000"> java</font><font color="#000000">.</font><font color="#000000">sql</font><font color="#000000">.*;</font><font color="#000000"><br></font><font color="#000080"><b>public</b></font><font color="#000000"> </font><font color="#000080"><b>class</b></font><font color="#000000"> SimpleQuery </font><font color="#000000">{</font><font color="#000000"><br></font><font color="#000080"><b>static</b></font><font color="#000000"> </font><font color="#000080"><b>final</b></font><font color="#000000"> String CONN_URL </font><font color="#000000">=</font><font color="#000000"> </font><font color="#0000ff">"jdbc:oracle:thin:@oracle1.ensimag.fr:1521:oracle1"</font><font color="#000000">;</font><font color="#000000"><br></font><font color="#000080"><b>static</b></font><font color="#000000"> </font><font color="#000080"><b>final</b></font><font color="#000000"> String USER </font><font color="#000000">=</font><font color="#000000"> </font><font color="#0000ff">"scott"</font><font color="#000000">; <span style="color: rgb(0, 128, 0);">// A remplacer pour votre compte</span></font><font color="#000000"><br></font><font color="#000080"><b>static</b></font><font color="#000000"> </font><font color="#000080"><b>final</b></font><font color="#000000"> String PASSWD </font><font color="#000000">=</font><font color="#000000"> </font><font color="#0000ff">"tiger"</font><font color="#000000">;</font><font color="#000000"><br></font><font color="#000080"><b>static</b></font><font color="#000000"> </font><font color="#000080"><b>final</b></font><font color="#000000"> String STMT </font><font color="#000000">=</font><font color="#000000"> </font><font color="#0000ff">"select * from emp"</font><font color="#000000">;</font><font color="#000000"><br></font><font color="#000080"><b>public</b></font><font color="#000000"> SimpleQuery</font><font color="#000000">()</font><font color="#000000"> </font><font color="#000000">{</font><font color="#000000"><br></font><font color="#000080"><b>try</b></font><font color="#000000"> </font><font color="#000000">{</font><font color="#000000"><br></font><font color="#008000">// Enregistrement du driver Oracle</font><font color="#000000"><br>System</font><font color="#000000">.</font><font color="#000000">out</font><font color="#000000">.</font><font color="#000000">print</font><font color="#000000">(</font><font color="#0000ff">"Loading Oracle driver... "</font><font color="#000000">);</font><font color="#000000"><br>DriverManager</font><font color="#000000">.</font><font color="#000000">registerDriver</font><font color="#000000">(</font><font color="#000080"><b>new</b></font><font color="#000000"> oracle</font><font color="#000000">.</font><font color="#000000">jdbc</font><font color="#000000">.</font><font color="#000000">driver</font><font color="#000000">.</font><font color="#000000">OracleDriver</font><font color="#000000">());</font><font color="#000000"><br>System</font><font color="#000000">.</font><font color="#000000">out</font><font color="#000000">.</font><font color="#000000">println</font><font color="#000000">(</font><font color="#0000ff">"loaded"</font><font color="#000000">);</font><font color="#000000"><br></font><font color="#008000">// Etablissement de la connection</font><font color="#000000"><br>System</font><font color="#000000">.</font><font color="#000000">out</font><font color="#000000">.</font><font color="#000000">print</font><font color="#000000">(</font><font color="#0000ff">"Connecting to the database... "</font><font color="#000000">);</font><font color="#000000"><br>Connection conn </font><font color="#000000">=</font><font color="#000000"> DriverManager</font><font color="#000000">.</font><font color="#000000">getConnection</font><font color="#000000">(</font><font color="#000000">CONN_URL</font><font color="#000000">,</font><font color="#000000"> USER</font><font color="#000000">,</font><font color="#000000"> PASSWD</font><font color="#000000">);</font><font color="#000000"><br>System</font><font color="#000000">.</font><font color="#000000">out</font><font color="#000000">.</font><font color="#000000">println</font><font color="#000000">(</font><font color="#0000ff">"connected"</font><font color="#000000">);</font><font color="#000000"><br></font><font color="#008000">// Creation de la requete</font><font color="#000000"><br>Statement stmt </font><font color="#000000">=</font><font color="#000000"> conn</font><font color="#000000">.</font><font color="#000000">createStatement</font><font color="#000000">(</font><font color="#000000">);</font><font color="#000000"><br></font><font color="#008000">// Execution de la requete</font><font color="#000000"><br>ResultSet rset </font><font color="#000000">=</font><font color="#000000"> stmt</font><font color="#000000">.</font><font color="#000000">executeQuery</font><font color="#000000">(STMT);</font><font color="#000000"><br></font><font color="#008000">// Affichage du resultat</font><font color="#000000"><br>System</font><font color="#000000">.</font><font color="#000000">out</font><font color="#000000">.</font><font color="#000000">println</font><font color="#000000">(</font><font color="#0000ff">"Results:"</font><font color="#000000">);</font><font color="#000000"><br>dumpResultSet</font><font color="#000000">(</font><font color="#000000">rset</font><font color="#000000">);</font><font color="#000000"><br>System</font><font color="#000000">.</font><font color="#000000">out</font><font color="#000000">.</font><font color="#000000">println</font><font color="#000000">(</font><font color="#000000">);</font><font color="#000000"><br></font><font color="#008000">// Fermeture</font><font color="#000000"><br>rset</font><font color="#000000">.</font><font color="#000000">close</font><font color="#000000">();</font><font color="#000000"><br>stmt</font><font color="#000000">.</font><font color="#000000">close</font><font color="#000000">();</font><font color="#000000"><br>conn</font><font color="#000000">.</font><font color="#000000">close</font><font color="#000000">();</font><font color="#000000"><br></font><font color="#000000">}</font><font color="#000000"> </font><font color="#000080"><b>catch</b></font><font color="#000000"> </font><font color="#000000">(</font><font color="#000000">SQLException e</font><font color="#000000">)</font><font color="#000000"> </font><font color="#000000">{</font><font color="#000000"><br>System</font><font color="#000000">.</font><font color="#000000">err</font><font color="#000000">.</font><font color="#000000">println</font><font color="#000000">(</font><font color="#0000ff">"failed"</font><font color="#000000">);</font><font color="#000000"><br>e</font><font color="#000000">.</font><font color="#000000">printStackTrace</font><font color="#000000">(</font><font color="#000000">System</font><font color="#000000">.</font><font color="#000000">err</font><font color="#000000">);</font><font color="#000000"><br></font><font color="#000000">}</font><font color="#000000"><br></font><font color="#000000">}</font><font color="#000000"><br></font><font color="#000080"><b>private</b></font><font color="#000000"> </font><font color="#000080"><b>void</b></font><font color="#000000"> dumpResultSet</font><font color="#000000">(</font><font color="#000000">ResultSet rset</font><font color="#000000">)</font><font color="#000000"> </font><font color="#000080"><b>throws</b></font><font color="#000000"> SQLException </font><font color="#000000">{</font><font color="#000000"><br>ResultSetMetaData rsetmd </font><font color="#000000">=</font><font color="#000000"> rset</font><font color="#000000">.</font><font color="#000000">getMetaData</font><font color="#000000">();</font><font color="#000000"><br></font><font color="#000080"><b>int</b></font><font color="#000000"> i </font><font color="#000000">=</font><font color="#000000"> rsetmd</font><font color="#000000">.</font><font color="#000000">getColumnCount</font><font color="#000000">();</font><font color="#000000"><br></font><font color="#000080"><b>for</b></font><font color="#000000"> </font><font color="#000000">(</font><font color="#000080"><b>int</b></font><font color="#000000"> k</font><font color="#000000">=</font><font color="#0000ff">1</font><font color="#000000">;</font><font color="#000000">k</font><font color="#000000">&lt;=</font><font color="#000000">i</font><font color="#000000">;</font><font color="#000000">k</font><font color="#000000">++)</font><font color="#000000"><br>System</font><font color="#000000">.</font><font color="#000000">out</font><font color="#000000">.</font><font color="#000000">print</font><font color="#000000">(</font><font color="#000000">rsetmd</font><font color="#000000">.</font><font color="#000000">getColumnName</font><font color="#000000">(</font><font color="#000000">k</font><font color="#000000">)</font><font color="#000000"> </font><font color="#000000">+</font><font color="#000000"> </font><font color="#0000ff">"\t"</font><font color="#000000">);</font><font color="#000000"><br>System</font><font color="#000000">.</font><font color="#000000">out</font><font color="#000000">.</font><font color="#000000">println</font><font color="#000000">();</font><font color="#000000"><br></font><font color="#000080"><b>while</b></font><font color="#000000"> </font><font color="#000000">(</font><font color="#000000">rset</font><font color="#000000">.</font><font color="#000000">next</font><font color="#000000">())</font><font color="#000000"> </font><font color="#000000">{</font><font color="#000000"><br></font><font color="#000080"><b>for</b></font><font color="#000000"> </font><font color="#000000">(</font><font color="#000080"><b>int</b></font><font color="#000000"> j </font><font color="#000000">=</font><font color="#000000"> </font><font color="#0000ff">1</font><font color="#000000">;</font><font color="#000000"> j </font><font color="#000000">&lt;=</font><font color="#000000"> i</font><font color="#000000">;</font><font color="#000000"> j</font><font color="#000000">++)</font><font color="#000000"> </font><font color="#000000">{</font><font color="#000000"><br>System</font><font color="#000000">.</font><font color="#000000">out</font><font color="#000000">.</font><font color="#000000">print</font><font color="#000000">(</font><font color="#000000">rset</font><font color="#000000">.</font><font color="#000000">getString</font><font color="#000000">(</font><font color="#000000">j</font><font color="#000000">)</font><font color="#000000"> </font><font color="#000000">+</font><font color="#000000"> </font><font color="#0000ff">"\t"</font><font color="#000000">);</font><font color="#000000"><br></font><font color="#000000">}</font><font color="#000000"><br>System</font><font color="#000000">.</font><font color="#000000">out</font><font color="#000000">.</font><font color="#000000">println</font><font color="#000000">();</font><font color="#000000"><br></font><font color="#000000">}</font><font color="#000000"><br></font><font color="#000000">}</font><font color="#000000"><br></font><font color="#000080"><b>public</b></font><font color="#000000"> </font><font color="#000080"><b>static</b></font><font color="#000000"> </font><font color="#000080"><b>void</b></font><font color="#000000"> main</font><font color="#000000">(</font><font color="#000000">String args</font><font color="#000000">[])</font><font color="#000000"> </font><font color="#000000">{</font><font color="#000000"><br></font><font color="#000080"><b>new</b></font><font color="#000000"> SimpleQuery</font><font color="#000000">();</font><font color="#000000"><br></font><font color="#000000">}</font><font color="#000000"><br></font><font color="#000000">}</font><font color="#000000"><br></font>
</pre>
<table bgcolor="#c0c0c0" cellpadding="5" cellspacing="0" cols="1" width="100%">
<tbody>
<tr>
<td>
<center> <font color="#000000" face="Arial,Helvetica"> SimpleQuery.java</font> </center>
</td>
</tr>
</tbody>
</table>
</body></html>